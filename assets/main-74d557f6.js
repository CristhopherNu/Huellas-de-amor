document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("donate-button"),t=document.getElementById("donation-modal"),s=document.querySelector(".close-button"),m=document.getElementById("cancel-button"),v=document.getElementById("donation-form"),y=document.querySelectorAll(".preset"),d=document.getElementById("donation-amount"),n=document.getElementById("card-number"),i=document.getElementById("card-expiry"),l=document.getElementById("card-cvc"),a=document.createElement("span");a.style.color="red",a.style.display="none",a.textContent="Número de tarjeta inválido.",n.parentNode.insertBefore(a,n.nextSibling);function r(){c.disabled=!d.value.trim()}function u(){const e=n.value.replace(/\D/g,"");n.value=e.slice(0,18),e.length===18?a.style.display="none":a.style.display="block"}n.addEventListener("input",u);function g(e){let o=e.target.value.replace(/\D/g,"");o.length>2&&(o=o.slice(0,2)+"/"+o.slice(2,4)),e.target.value=o}i.addEventListener("input",g);function p(e){e.target.type="password"}l.addEventListener("focus",p);function E(e){e.target.value=e.target.value.replace(/\D/g,""),e.target.value.length>4&&(e.target.value=e.target.value.slice(0,4))}l.addEventListener("input",E),c.addEventListener("click",()=>{d.value.trim()&&(t.style.display="block")}),s.addEventListener("click",()=>{t.style.display="none"}),m.addEventListener("click",()=>{t.style.display="none"}),window.addEventListener("click",e=>{e.target===t&&(t.style.display="none")}),v.addEventListener("submit",e=>{if(e.preventDefault(),!u()){alert("Por favor, ingresa un número de tarjeta válido de 18 dígitos.");return}alert("Gracias por su donación"),d.value="",n.value="",i.value="",l.value="",r(),t.style.display="none"}),y.forEach(e=>{e.addEventListener("click",()=>{d.value=e.getAttribute("data-amount"),r()})}),r()});
